# 3 Chiqaruvchilar

## 3.0 Kirish

Chiqaruvchilar - har qanday tizimda bir marta ishlatiladigan komponentlar bo'lib, biznes logika qiymatlarini ma'lum bir protokolga solishtirish orqali tashqi dunyo bilan aloqa o'rnatib beruvchi yagona qatlamdir. Masalan, RESTful xizmatlarida API kontroller muvaffaqiyatli javob uchun `200` kodini qaytarishi kerak bo'ladi. Xuddi shu narsa gRPC-mi, SOAP-mi yoki, umuman, boshqa aloqa protokollari bo'ladimi, bir xil amal qiladi.

Chiqaruvchi komponentlar Brokerlarga o'xshab ketadi. Ular tashqi dunyo va biznes logika o'rtasidagi so'ngi qatlam hisoblanadi. Chiqaruvchilar asosiy mantiqni bir vaqtning o'zida zamonaviy tizimlar, protokollar yoki interfeyslarda qo'llab, joriy tizimdan ajralib mustaqil bo'lish maqsadida yaratilgan.

<br />
    <p align=center>
        <img src="./Resurslar/chiqaruvchilar.jpg" />
    </p>
<br />

## 3.0.0 Maqsad

Umuman olganda, biznes g'oyangiz bilan kimningdir ishlay olishi - bu chiqarish komponentining asosiy vazifasi hisoblanadi. Bunday vazifadorlik asosiy biznes g'oyadan olinishi mumkin bo'lgan har qanday javobni iste’molchiga ehtiyotkorlik bilan yetkazgan holda, mantiqan moslashtirilgan bo'lishi lozim. E'tibor bering, ehtiyotkorlik muhim, chunki ba'zida ichki muammolar tashqi dunyoga chiqmasligi lozim. Javoblarni moslashtirish esa odatda, oson bo'ladi. Chunki protokol va biznes g'oya o'rtasida aloqa vositasi rolini o'ynovchi til yoki texnologiya tizimda ishlash uchun ishlab chiqarilgan kutubxonalar bilan bir xildir.

Ammo, tizimga kirayotgan qiymatlar har doim ham kutilganidek bo'lmasligi mumkin. Bunday holatda, tizimga kirayotgan va undan chiqayotgan qiymatlarni bir-biriga moshlashtirish chiqaruvchi komponentlarning vazifasiga aylanadi. API kontrollerlarni bunga zo'r misol sifatida olishimiz mumkin. Ba'zi turdagi validatsiya istisnolari mavjud bo'lganda, `4xx` status kodli muammo haqidagi xabar jo'natiladi. Agar hech qanday muammo bo'lmasa, ketma-ketliklardan iborat JSON qiymati qaytariladi. Aslida, muammo tafsilotlari haqida bundan ko'ra ko'proq ma'lumotlar mavjud. Muammo tafsilotlari, moslashtirishning boshqa turlari va aloqalar haqida ushbu bo'limning keyingi boblarida gaplashamiz. 

### 3.0.0.0 Sof moslashtirish

Chiqarish komponentining eng muhim jihati, ularning hech qanday brokerlar bilan muloqot qilmasligi va o'zida hech qanday biznes logika saqlamasligidadir. Biznes logika deganda men, doimiy chaqiruvlar, iteratsiyalar yoki bo'lmasa, saralash kabi ishlarni nazarda tutdim. Xuddi brokerlar kabi, chiqaruvchilar biror qiymatga ega bo'lish uchun mavjud qismni tashqi soha bilan bog'laydilar. 

## 3.0.1 Chiqaruvchi komponentlar turlari

Chiqaruvchi komponentlarning uch xil turi mavjud. Bular aloqa protokollar, foydalanuvchi interfeysi yoki oddiy IO funksiyaslaridir. Quyida bular haqida qisqacha to'xtalib o'tamiz.

### 3.0.1.0 Aloqa protokollari

Aloqa protokoli bo'lgan chiqaruvchi komponent SOAP texnologiyasi yoki gRPC-ni qo'llash orqali sodda RESTful APIdan farq qiladi. Ular, shuningdek, mijozlar o'z loyihalarida o'rnatib, API orqali sizning asosiy biznes g'oyangizdan foydalanadigan biror kutubxonadagi qandaydir paket bo'lishlari ham mumkin. Yuqoridagi ikkala holat ham bir turdagi chiqaruvchi komponent hisoblanadi. 

Odatda, aloqa protokollari, hodisalarga asoslanganligi bilan boshqa protokollardan farq qiladi. Ular tashqi so'rov kelishi bilan ishga tushib, asosiy biznes g'oyadan qaytib kelgan har qanday javob ustida ishlaydi. Aloqa protokollari ko'pincha tizimlar aro ishlash uchun mo'ljallangan. Shunday bo'lsa-da, ular, testlash va xatoliklarni aniqlash uchun tushunarli qilib ishlab chiqilgan.

### 3.0.1.1 Foydalanuvchi interfeysi

Chiqaruvchi komponentning yana bir turi bu - foydalanuvchi interfeysidir. Foydalanuvchi interfeysi veb, mobil yoki desktop, shu jumladan, matnli buyruqlar orqali ishlatiluvchi dasturlardan farq qilishi mumkin. Foydalanuvchi interfeysining asosiy maqsadi, boshqa tizim orqali avtomatlashtirish imkoni borligini hisobga olgan holda, foydalanuvchi bilan aloqa o'rnatib berishdan iborat. Ayniqsa, matnli buyruqlar orqali boshqariluvchi dasturlarda buni ko'rishmiz mumkin. Hozirgi davrda, foydalanuvchi interfeysi metaversa yoki shunga o'xshash har qanday dasturiy ta’minotlardan tortib, virtual reallikkacha o'zida qo'llashi mumkin. 

Inson-Mashina-Interfeysining (IMI) ham chiqaruvchi komponentga aylanuvchi holatlari bor. Bunga telefonlarimizdagi tugmalar, har doim foydalanadigan klaviaturamiz yoki boshqa har qanday tashqi qurilmalar misol bo'la oladi. Chunki bular, chiqaruvchi komponent kabi, to'g'ridan-to'g'ri biznes g'oya bilan ishlaydi. Ayni tushuncha, inson tomonidan to'liq quvvati bilan foydalanishi mumkin bo'lgan turli texnologiyalarni, jumaldan buyumlar interneti (IoT)ni o'z ichiga oladi. 

### 3.0.1.2 I/O Komponentlar

Ba'zi chiqaruvchi komponentlar tizim bilan o'zaro aloqada qilishlari shart emas. Ulardan maqsad - inson bilan muloqotni yo'lga qo'yish. Bu turdagi chiqaruvchilar, fonda biror narsanining aniq holatni hisobga olmay bajaradigan doimiy fon jarayoni yoki Kirish/Chiqish'ga asoslangan komponentlardir. Odatda, bunday komponentlar vaqtga asoslangan bo'lib, ular mavjud protokoldan foydalanishi yoki bo'lmasa, asosiy biznes logika orqali to'g'ridan-to'g'ri interfeys orqali ishlashi mumkin. 

## 3.0.2 Aloqaning yagona nuqtasi

Chiqaruvchi komponentlarda faqat va faqat birgina Xizmat bilan aloqa qilish mumkin. Bir-necha Xizmatlarni o'zida qo'llash - Chiqaruvchi komponentlarni Orkestratsiya yoki Aggregatsiya xizmatlardan biriga aylnatirib qo'yadi. Bu ikkala xizmat ham asosiy biznes g'oya vazifasini o'tab bera olmaydi.

Shuningdek, Aloqaning yagona nuqtasi Chiqarish komponentining bir marta ishlatilishi va integratsiyaning Xizmatlardagi bog'liqliklari orqali soddalikni va yagona maqsadli bo'lishini ta'minlaydi. Ularni istalgan vaqtda, deyarli har qanday protokolga eng kam resurs bilan qayta ulash mumkin.

## 3.0.3 Misollar

Har qanday shaklda ishlovchi Chiqaruvchi komponentga misol sifatida API kontrollerlarni ko'rib chiqamiz:

```csharp
[HttpPost]
public async ValueTask<ActionResult<Student>> PostStudentAsync(Student student)
{
    try
    {
        Student registeredStudent =
            await this.studentService.RegisterStudentAsync(student);

        return Created(registeredStudent);
    }
    catch (StudentValidationException studentValidationException)
        when (studentValidationException.InnerException is AlreadyExistsStudentException)
    {
        return Conflict(studentValidationException.InnerException);
    }
    catch (StudentValidationException studentValidationException)
    {
        return BadRequest(studentValidationException.InnerException);
    }
    catch (StudentDependencyException studentDependencyException)
    {
        return InternalServerError(studentDependencyException);
    }
    catch (StudentServiceException studentServiceException)
    {
        return InternalServerError(studentServiceException);
    }
}
```

Yuqoridagi kod talaba modelini maktab uchun yaratilgan tizim (OrtipleS)ning biznes logikasiga `POST` qiladi. ASP.NET-ga o'xshash texnologiyalarda kontroller tashqi dunyodan keluvchi JSON ma'lumotlarni `Student` modeliga moslashtirish bilan shug‘ullanadi.

Shu bilan birga, kontrollerlarning har xil ruxsat etilgan istisnolarni tegishli REST protokoli bilan solishtirishingiz ham mumkin. Yuqoridagi kod chiqaruvchi qatlamning qanday ko'rinishda bo'lishini shunchaki tasvirlash uchun yaratilgan. "Me’yor" - ning keyingi boblarida kontrollerlar uchun o'rnatilgan shartlar va qoidalar haqida batafsilroq gaplashamiz.

### 3.0.4 Xulosa

Xulosa qilib aytganda, Chiqaruvchi komponentlar juda nozik qatlam bo‘lib, unda hech qanday logika yoki fikrlashga majbur qiluvchi kod bo‘lmasligi zarur. Shuningdek, chiqaruvchilar bir-qancha biznes g‘oyalarni yaratishga ham, chaqirishga ham mo‘ljallanmagan. Ular, shunchaki, ikkita tizim o‘rtasida aloqa ko‘prigi vazifasini yaratish uchun ishlab chiqilgan.